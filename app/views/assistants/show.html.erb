<div class="h-full flex bg-background">
  <!-- 主要内容区域 -->
  <div class="flex-1 flex flex-col">
    <div class="p-6">
      <div class="mb-6">
        <h1 class="text-2xl font-bold mb-2"><%= @assistant.name %></h1>
        <p class="text-muted-foreground"><%= @assistant.description %></p>
      </div>
      
      <!-- 创建新对话表单 -->
      <div class="mb-8">
        <h2 class="text-lg font-semibold mb-3">开始新对话</h2>
        <%= form_with model: [@assistant, @conversation], class: "flex flex-col space-y-3" do |f| %>
          <div>
            <%= f.label :title, "对话标题", class: "block text-sm font-medium mb-1" %>
            <%= f.text_field :title, class: "w-full rounded-md border border-input bg-background px-3 py-2 text-sm", placeholder: "例如：产品功能讨论" %>
          </div>
          <div>
            <%= f.submit "创建对话", class: "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none bg-primary text-primary-foreground hover:bg-primary/90 h-10 py-2 px-4" %>
          </div>
        <% end %>
      </div>
      
      <!-- 历史对话列表 -->
      <div>
        <h2 class="text-lg font-semibold mb-3">历史对话</h2>
        <% if @conversations.any? %>
          <div class="space-y-3">
            <% @conversations.each do |conversation| %>
              <div class="flex items-center justify-between border border-border rounded-lg p-4 hover:bg-muted/50 transition-colors">
                <div>
                  <h3 class="font-medium"><%= conversation.title %></h3>
                  <p class="text-xs text-muted-foreground"><%= l(conversation.created_at, format: :long) %></p>
                </div>
                <%= link_to "查看", assistant_conversation_path(@assistant, conversation), class: "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 px-3" %>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class="text-center p-8 border border-dashed border-border rounded-lg">
            <p class="text-muted-foreground">暂无历史对话</p>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <!-- 右侧边栏 -->
  <div class="w-64 bg-muted/50 border-l border-border flex-shrink-0 hidden md:block">
    <div class="p-4 border-b border-border">
      <div class="flex items-center justify-between">
        <h2 class="font-semibold text-lg">所有助手</h2>
        <button class="p-2 hover:bg-muted rounded-full" data-controller="theme-switcher">
          <%= lucide_icon "sun", class: "w-5 h-5 dark:hidden" %>
          <%= lucide_icon "moon", class: "w-5 h-5 hidden dark:block" %>
        </button>
      </div>
    </div>
    <div class="overflow-y-auto">
      <div class="p-4 space-y-2">
        <% Assistant.all.each do |assistant| %>
          <%= link_to assistant_path(assistant), class: "block p-2 rounded-md hover:bg-muted #{assistant == @assistant ? 'bg-muted' : ''}" do %>
            <div class="flex items-center space-x-2">
              <%= lucide_icon assistant.icon || "bot", class: "w-5 h-5" %>
              <span><%= assistant.name %></span>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div> 